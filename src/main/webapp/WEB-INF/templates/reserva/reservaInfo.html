<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>RESERVé</title>
<link rel="stylesheet" th:href="@{/css/reserva.css}" media="all">
</head>

<body>
	<h1>
		RESERVé
	</h1>

	<p>
		RESERVé
	</p>
	<form action="/restauranteDoZe/reserva/agendar" method="POST">
        <label for="nome">Nome:</label><br>
        <input type="text" id="nome" name="nome" maxlength="255" required><br><br>

        <label for="cpf">CPF:</label><br>
        <input type="text" id="cpf" name="cpf" maxlength="14" required><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" maxlength="255" required><br><br>

        <label for="data_reserva">Data da Reserva:</label><br>
        <input type="date" id="data_reserva" name="data_reserva" required><br><br>

		<p id="disponibilidade"></p>
		
        <input type="submit" value="Enviar">
    </form>
	<ul>
		<li>
			<a th:href="@{/cardapio/cardapio}">fazer reserva</a>
		</li>
	
	</ul>
	
	
	
	<script>
        document.getElementById('data_reserva').addEventListener('change', function() {
            const dataReserva = this.value;

            fetch(`/restauranteDoZe/reserva/check?data_reserva=${dataReserva}`)
                .then(response => response.json())
                .then(data => {
                    const disponibilidadeElement = document.getElementById('disponibilidade');
                    if (data.disponivel) {
                        disponibilidadeElement.textContent = 'Data disponível!';
                        disponibilidadeElement.style.color = 'green';
                    } else {
                        disponibilidadeElement.textContent = 'Data indisponível!';
                        disponibilidadeElement.style.color = 'red';
                    }
                })
                .catch(error => {
                    console.error('Erro ao verificar disponibilidade:', error);
                });
        });
    </script>
</body>
</html>